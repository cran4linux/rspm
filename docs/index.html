<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Enables binary package installations on Linux distributions. Provides access to RStudio public repositories at &lt;https://packagemanager.posit.co&gt;, and transparent management of system requirements without administrative privileges. Currently supported distributions are CentOS / RHEL 7-9, and several RHEL derivatives (Rocky Linux, AlmaLinux, Oracle Linux, and Amazon Linux 2), openSUSE / SLES 15.4-5, Debian 11-12, and Ubuntu LTS 20-22.">
<title>RStudio Package Manager â€¢ rspm</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="RStudio Package Manager">
<meta property="og:description" content="Enables binary package installations on Linux distributions. Provides access to RStudio public repositories at &lt;https://packagemanager.posit.co&gt;, and transparent management of system requirements without administrative privileges. Currently supported distributions are CentOS / RHEL 7-9, and several RHEL derivatives (Rocky Linux, AlmaLinux, Oracle Linux, and Amazon Linux 2), openSUSE / SLES 15.4-5, Debian 11-12, and Ubuntu LTS 20-22.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">rspm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.5.2</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/cran4linux/rspm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="rspm-rstudio-package-manager">rspm: RStudio Package Manager<a class="anchor" aria-label="anchor" href="#rspm-rstudio-package-manager"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="key-features">Key features<a class="anchor" aria-label="anchor" href="#key-features"></a>
</h2>
<ul>
<li>Connects to <a href="https://packagemanager.posit.co/" class="external-link">RStudio Public Package Manager</a> to provide <strong>fast binary installations</strong> of R packages on Linux.</li>
<li>
<strong>Complete coverage</strong> of CRAN and BioConductor packages.</li>
<li>
<strong>Full integration</strong> with the system package manager to resolve, download and configure system requirements automagically without leaving your R console.</li>
<li>
<strong>Fully user mode</strong>, no root privileges required.</li>
<li>Support for <strong>CentOS / RHEL</strong> 7, 8 and 9.</li>
<li>Support for <strong>RHEL derivatives</strong>: Rocky Linux 8-9, AlmaLinux 8-9, Oracle Linux 7-9, Amazon Linux 2.</li>
<li>Support for <strong>openSUSE / SLES</strong> 15.4 and 15.5.</li>
<li>Support for <strong>Debian</strong> 11 and 12 (requires <code>apt-file</code>).</li>
<li>Support for <strong>Ubuntu</strong> 20.04 and 22.04 (requires <code>apt-file</code>).</li>
</ul>
<p>Both R packages and system dependencies <strong>are installed into the user home</strong>. For lightning-fast system-based installations (which have other advantages, such as multitenancy, reversibility and automatic updates, still without root privileges), see the <a href="https://cran4linux.github.io/bspm/" class="external-link">bspm</a> package and projects such as <a href="https://github.com/cran4linux/cran2copr" class="external-link">cran2copr</a> for Fedora or <a href="https://github.com/eddelbuettel/r2u" class="external-link">r2u</a> for Ubuntu.</p>
</div>
<div class="section level2">
<h2 id="demo">Demo<a class="anchor" aria-label="anchor" href="#demo"></a>
</h2>
<p>Here we enable <code>rspm</code> and trigger a binary installation of the <code>units</code> package. Then, we can see how the UDUNITS-2 dependency is detected, downloaded and configured.</p>
<p><img src="https://github.com/cran4linux/rspm/blob/main/docs/assets/rspm_units.gif?raw=true"></p>
</div>
<div class="section level2">
<h2 id="installation-and-usage">Installation and usage<a class="anchor" aria-label="anchor" href="#installation-and-usage"></a>
</h2>
<p>You can install it directly from GitHub using the <code>remotes</code> package:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"cran4linux/rspm"</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h3>
<p>You just need to enable it once for your session, and then you can install or update packages normally via <code>install.packages</code> or <code>update.packages</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rspm</span><span class="fu">::</span><span class="fu"><a href="reference/integration.html">enable</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"units"</span><span class="op">)</span></span></code></pre></div>
<p>Packages with system requirements, like the one above, will be scanned and configured automatically. Typically, everything will just work without any further action. But if something gets misconfigured for some reason, it is possible to manually trigger a reconfiguration with the following command:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rspm</span><span class="fu">::</span><span class="fu"><a href="reference/manager.html">install_sysreqs</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>To enable it by default for all sessions, put the following into your <code>.Rprofile</code>:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rspm</span><span class="fu">::</span><span class="fu"><a href="reference/integration.html">enable</a></span><span class="op">(</span><span class="op">)</span> <span class="co"># wrap it in suppressMessages() to suppress the initial message</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="renv-projects">{renv} projects<a class="anchor" aria-label="anchor" href="#renv-projects"></a>
</h3>
<p>To initialize an <code>renv</code> project with <code>rspm</code> support, just run the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">rspm</span><span class="fu">::</span><span class="fu"><a href="reference/renv_init.html">renv_init</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This command runs <code><a href="https://rstudio.github.io/renv/reference/init.html" class="external-link">renv::init()</a></code> for you and then installs the infrastructure required for the integration with <code>install.packages</code> and <code>update.packages</code>. Note that, if <code><a href="https://rstudio.github.io/renv/reference/install.html" class="external-link">renv::install</a></code> or <code><a href="https://rstudio.github.io/renv/reference/update.html" class="external-link">renv::update</a></code> are called directly, then <code><a href="reference/manager.html">rspm::install_sysreqs()</a></code> needs to be called manually.</p>
</div>
<div class="section level3">
<h3 id="docker-workflows">Docker workflows<a class="anchor" aria-label="anchor" href="#docker-workflows"></a>
</h3>
<p>In Docker containers, system requirements can be installed directly as root. Therefore, it is enough to include in your Dockerfile the following line right after <code><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">renv::restore()</a></code>:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode dockerfile"><code class="sourceCode dockerfile"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="kw">RUN</span> <span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">'renv::install("rspm"); rspm::install_sysreqs()'</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="technical-details">Technical details<a class="anchor" aria-label="anchor" href="#technical-details"></a>
</h2>
<p>Since <em>always</em>, Linux R users have been struggling with source installations and manual management of build dependencies. Several projects over the years tried to lessen this pain by building repositories of binaries that complement and scale up the offer by various distributions. See e.g.Â the <a href="https://launchpad.net/~c2d4u.team/+archive/ubuntu/c2d4u4.0+" class="external-link">c2d4u.team/c2d4u4.0+</a> PPA repo for Ubuntu or, more recently, the <a href="https://build.opensuse.org/project/show/devel:languages:R:autoCRAN" class="external-link">autoCRAN</a> OBS repo for OpenSUSE, the <a href="https://copr.fedorainfracloud.org/coprs/iucar/cran/" class="external-link">iucar/cran</a> Copr repo for Fedora, the <a href="https://github.com/dvdesolve/ArchRPkgs" class="external-link">ArchRPkgs</a> repo for Arch and the <a href="https://github.com/eddelbuettel/r2u" class="external-link">r2u</a> repo again for Ubuntu. These are tightly integrated and can be fully managed without leaving the R console thanks to the <a href="https://cran4linux.github.io/bspm/" class="external-link">bspm</a> package. See <a href="https://arxiv.org/abs/2103.08069" class="external-link">this paper</a> for a detailed review.</p>
<p>On the other hand, RStudio recently took a complementary approach by building binariesâ€”for various distributions, R versions and architecturesâ€”and serving them via their own CRAN mirror, also called the <a href="https://packagemanager.posit.co/" class="external-link">RStudio Public Package Manager (RSPM)</a>. In contrast to the previous solutions, this method allows the user to install binary packages as <em>user packages</em> under their home directory (virtually anywhere), instead of as <em>system packages</em>. The main issue is that the user has still to manage run-time system requirements themselves (i.e., shared libraries required by some packages to work), so this method by itself produces installations that are fundamentally broken.</p>
<p>To fill this gap, this package not only provides an easy setup of RSPM, but also monitors and scans every installation for missing system requirements, and then automatically downloads, installs and configures them, relieving the user of this task. This is done following the same complementary philosophy: <strong>everything is installed as <em>user packages</em> under the home directory</strong>. More specifically, this package uses the path <code>~/.local/share/R/rspm</code> for this.</p>
<p>The main technical issue here is that libraries are search for only in a few pre-configured places that belong to the system (such as <code>/usr/lib</code>), and thus we need a mechanism to feed our new user-hosted library paths to R packages, hopefully without restarting R and managing environment variables. This is achieved by <strong>automatically updating the <code>RPATH</code></strong> of every <code>.so</code> binary in our user R packages. This <code>RPATH</code> is an optional entry that lives in the header of ELF executables and shared libraries, and it is used by the dynamic linker as the primary search path if exists. Therefore, it is the perfect mechanism for this task, because it can be applied dynamically as new installations are made, and without requiring any special privilege.</p>
</div>
<div class="section level2">
<h2 id="support">Support<a class="anchor" aria-label="anchor" href="#support"></a>
</h2>
<p>If you find any bug or youâ€™d like to request support for other distributions (importantly, they must be supported by RStudio), please file issues at our <a href="https://github.com/cran4linux/rspm/issues" class="external-link">GitHub issue tracker</a>. Note though that some quirks may be expected:</p>
<ul>
<li>
<em>Some library is not found</em>. This means that the library version in your system is different from what RStudio had when the package was built. This is more likely to happen in derivatives (e.g.Â Amazon Linux) that drift away from their parent.</li>
<li>
<em>Some package is installed from source</em>. This means that RStudio has no binary version for that package.</li>
</ul>
<p>There is nothing <em>we</em> can do from <code>rspm</code> in either case, so please <strong>do not</strong> file issues about them. Unfortunately, the best <em>you</em> can do is to install the development packages for the required library and force a source installation (i.e.Â <em>business as usual</em>).</p>
</div>
<div class="section level2">
<h2 id="disclaimer">Disclaimer<a class="anchor" aria-label="anchor" href="#disclaimer"></a>
</h2>
<p><em>RStudio</em> is a registered trademark of <a href="https://posit.co/" class="external-link">Posit</a>. This software provides access to a public repository maintained by RStudio and provided to the open-source community for free, but has no association with it.</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=rspm" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/cran4linux/rspm/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/cran4linux/rspm/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.r-project.org/Licenses/GPL-2" class="external-link">GPL-2</a> | <a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a> | <a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rspm</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>IÃ±aki Ucar <br><small class="roles"> Author, copyright holder, maintainer </small> <a href="https://orcid.org/0000-0001-6403-5550" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>R Core Team <br><small class="roles"> Author, copyright holder </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/cran4linux/rspm/actions" class="external-link"><img src="https://github.com/cran4linux/rspm/workflows/build/badge.svg" alt="Build Status"></a></li>
<li><a href="https://cran.r-project.org/package=rspm" class="external-link"><img src="https://www.r-pkg.org/badges/version/rspm" alt="CRAN_Status_Badge"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by IÃ±aki Ucar, R Core Team.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
